# Offline Petition Feature - Visual Architecture

## ğŸ—ï¸ System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POLICE DASHBOARD                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Document  â”‚  â”‚ Chargesheetâ”‚  â”‚   Cases    â”‚  ...      â”‚
â”‚  â”‚  Drafting  â”‚  â”‚ Generation â”‚  â”‚            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   ğŸ†• SUBMIT OFFLINE PETITION        â”‚ â† SP+ ONLY       â”‚
â”‚  â”‚   (Teal colored, first card)         â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SUBMIT OFFLINE PETITION SCREEN                       â”‚
â”‚                                                              â”‚
â”‚  ğŸ“‹ Petition Details                                        â”‚
â”‚  â”œâ”€ Title                                                   â”‚
â”‚  â””â”€ Type (Bail, Appeal, etc.)                              â”‚
â”‚                                                              â”‚
â”‚  ğŸ‘¤ Petitioner Information                                  â”‚
â”‚  â”œâ”€ Name                                                    â”‚
â”‚  â”œâ”€ Phone                                                   â”‚
â”‚  â””â”€ Address                                                 â”‚
â”‚                                                              â”‚
â”‚  ğŸ“ Incident Details                                        â”‚
â”‚  â”œâ”€ Location                                                â”‚
â”‚  â”œâ”€ Date                                                    â”‚
â”‚  â””â”€ FIR Number                                              â”‚
â”‚                                                              â”‚
â”‚  ğŸ“„ Complaint Description                                   â”‚
â”‚  â”œâ”€ Grounds/Details                                         â”‚
â”‚  â””â”€ Prayer/Relief                                           â”‚
â”‚                                                              â”‚
â”‚  ğŸ“ Document Attachments                                    â”‚
â”‚  â”œâ”€ Handwritten Complaint (PDF/Image)                      â”‚
â”‚  â””â”€ Proof Documents (Multiple)                             â”‚
â”‚                                                              â”‚
â”‚  ğŸ‘® Assignment (Optional)                                   â”‚
â”‚  â”œâ”€ [Toggle] Assign Immediately                            â”‚
â”‚  â””â”€ [Button] Select Officer â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                                       â”‚                      â”‚
â”‚  [Submit Button]                     â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  OFFICER SELECTION DIALOG    â”‚
                        â”‚                              â”‚
                        â”‚  ğŸ” Search: [__________]    â”‚
                        â”‚                              â”‚
                        â”‚  Filter by Rank:             â”‚
                        â”‚  [All] [DSP] [SI] [ASI]...  â”‚
                        â”‚                              â”‚
                        â”‚  Officer List:               â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                        â”‚  â”‚ ğŸ‘¤ Officer Name     â”‚   â”‚
                        â”‚  â”‚ ğŸ–ï¸ Rank: SI         â”‚   â”‚
                        â”‚  â”‚ ğŸ“ Station, Districtâ”‚   â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                        â”‚  â”‚ ğŸ‘¤ Officer Name     â”‚   â”‚
                        â”‚  â”‚ ğŸ–ï¸ Rank: ASI        â”‚   â”‚
                        â”‚  â”‚ ğŸ“ Station, Districtâ”‚   â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                        â”‚                              â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â†“ (Officer Selected)
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   PETITION SUBMITTED          â”‚
                        â”‚                              â”‚
                        â”‚   âœ… Petition Created        â”‚
                        â”‚   âœ… Documents Uploaded      â”‚
                        â”‚   âœ… Assignment Created      â”‚
                        â”‚                              â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                             â”‚
                        â†“                             â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ ASSIGNING OFFICER     â”‚    â”‚ ASSIGNED OFFICER         â”‚
           â”‚                       â”‚    â”‚                          â”‚
           â”‚ Can view in:          â”‚    â”‚ Receives notification:   â”‚
           â”‚ â€¢ My Assigned List    â”‚    â”‚ â€¢ Assigned to Me tab     â”‚
           â”‚ â€¢ All Petitions       â”‚    â”‚                          â”‚
           â”‚                       â”‚    â”‚ Actions:                 â”‚
           â”‚ Can track:            â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
           â”‚ â€¢ Assignment Status   â”‚    â”‚ â”‚ [Accept]         â”‚   â”‚
           â”‚ â€¢ Officer Progress    â”‚    â”‚ â”‚ [Reject]         â”‚   â”‚
           â”‚                       â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â†“
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ STATUS UPDATED           â”‚
                                        â”‚                          â”‚
                                        â”‚ Pending â†’ Accepted       â”‚
                                        â”‚      or                  â”‚
                                        â”‚ Pending â†’ Rejected       â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SP Officer   â”‚
â”‚ (Submitter)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1. Fill Form & Upload Docs
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SubmitOfflinePetitionâ”‚
â”‚      Screen          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 2. Create Petition Object
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Petition Model      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Basic Info     â”‚ â”‚
â”‚  â”‚ submissionType â”‚ â”‚
â”‚  â”‚ submittedBy    â”‚ â”‚
â”‚  â”‚ assignedTo     â”‚ â”‚
â”‚  â”‚ assignmentStatusâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 3. Upload to Storage & Firestore
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Firebase Storage     â”‚     â”‚ Firestore DB         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Documents      â”‚  â”‚â—„â”€â”€â”€â”€â”¤ â”‚ petitions/     â”‚  â”‚
â”‚ â”‚ Images         â”‚  â”‚     â”‚ â”‚   {petitionId} â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚ 4. Firestore Triggers
                                     â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Real-time Listeners    â”‚
                        â”‚ (StreamBuilder)        â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                               â”‚
                â†“                               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Assigning Officerâ”‚            â”‚ Assigned Officer â”‚
    â”‚ Dashboard        â”‚            â”‚ Assigned Tab     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚ 5. Accept/Reject
                                            â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Update Firestore â”‚
                                    â”‚ assignmentStatus â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Assignment State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Created    â”‚ (Initial state when petition submitted)
â”‚  (offline)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ [Assign Action]
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pending    â”‚ (Waiting for officer to respond)
â”‚  Assignment â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€[Accept]â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                           â”‚  Accepted    â”‚
       â”‚                           â”‚              â”‚
       â”‚                           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                  â”‚
       â”‚                                  â”‚ [Work on Case]
       â”‚                                  â†“
       â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                           â”‚ In Progress  â”‚
       â”‚                           â”‚              â”‚
       â”‚                           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                  â”‚
       â”‚                                  â”‚ [Complete]
       â”‚                                  â†“
       â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                           â”‚   Closed     â”‚
       â”‚                           â”‚              â”‚
       â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€[Reject]â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Rejected    â”‚
                                   â”‚              â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ³ Component Hierarchy

```
App
â””â”€â”€ AppRouter
    â””â”€â”€ AppScaffold
        â””â”€â”€ PoliceDashboardScreen
            â”œâ”€â”€ DashboardBody
            â”‚   â”œâ”€â”€ StatsRow
            â”‚   â”œâ”€â”€ QuickActions
            â”‚   â”‚   â”œâ”€â”€ DocumentDrafting
            â”‚   â”‚   â”œâ”€â”€ SubmitOfflinePetition â­ NEW
            â”‚   â”‚   â”œâ”€â”€ Chargesheet
            â”‚   â”‚   â””â”€â”€ ...
            â”‚   â””â”€â”€ RecentActivity
            â”‚
            â””â”€â”€ [Navigation] â†’ SubmitOfflinePetitionScreen
                â”œâ”€â”€ PetitionForm
                â”‚   â”œâ”€â”€ PetitionDetails
                â”‚   â”œâ”€â”€ PetitionerInfo
                â”‚   â”œâ”€â”€ IncidentDetails
                â”‚   â”œâ”€â”€ DocumentUpload
                â”‚   â””â”€â”€ AssignmentSection
                â”‚       â””â”€â”€ [Dialog] â†’ AssignPetitionDialog
                â”‚           â”œâ”€â”€ SearchBar
                â”‚           â”œâ”€â”€ RankFilters
                â”‚           â””â”€â”€ OfficerList
                â”‚               â””â”€â”€ OfficerCard (x N)
                â”‚
                â””â”€â”€ SubmitButton
                    â””â”€â”€ [Success] â†’ Navigator.pop()

PolicePetitionsScreen
â””â”€â”€ Tabs
    â”œâ”€â”€ AllPetitions
    â”œâ”€â”€ Received
    â”œâ”€â”€ InProgress
    â”œâ”€â”€ Closed
    â””â”€â”€ AssignedPetitionsTab â­ NEW
        â”œâ”€â”€ StatusFilters
        â””â”€â”€ PetitionList
            â””â”€â”€ AssignedPetitionCard (x N)
                â”œâ”€â”€ PetitionDetails
                â”œâ”€â”€ StatusChip
                â””â”€â”€ Actions [Accept/Reject]
```

---

## ğŸ” Permission Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FEATURE PERMISSIONS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Feature     â”‚   SP+   â”‚   DSP   â”‚   SI    â”‚   Constable   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Submit        â”‚    âœ…    â”‚    âŒ    â”‚    âŒ    â”‚      âŒ       â”‚
â”‚ Offline       â”‚         â”‚         â”‚         â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Assign        â”‚    âœ…    â”‚    âŒ    â”‚    âŒ    â”‚      âŒ       â”‚
â”‚ Petitions     â”‚         â”‚         â”‚         â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Receive       â”‚    âœ…    â”‚    âœ…    â”‚    âœ…    â”‚      âœ…       â”‚
â”‚ Assignments   â”‚         â”‚         â”‚         â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Accept/       â”‚    âœ…    â”‚    âœ…    â”‚    âœ…    â”‚      âœ…       â”‚
â”‚ Reject        â”‚         â”‚         â”‚         â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ View All      â”‚    âœ…    â”‚    âŒ    â”‚    âŒ    â”‚      âŒ       â”‚
â”‚ District      â”‚         â”‚         â”‚         â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
  SP+  = Superintendent of Police and above
  DSP  = Deputy Superintendent of Police
  SI   = (Sub) Inspector of Police
  Constable = Head Constable, Police Constable
```

---

## ğŸ“Š Database Schema Reference

```
petitions (collection)
â”œâ”€â”€ {petitionId} (document)
    â”œâ”€â”€ title: string
    â”œâ”€â”€ type: string
    â”œâ”€â”€ petitionerName: string
    â”œâ”€â”€ grounds: string
    â”‚
    â”œâ”€â”€ â”€â”€â”€ OFFLINE FIELDS â”€â”€â”€
    â”œâ”€â”€ submissionType: "offline"
    â”œâ”€â”€ submittedBy: "officer-uid-123"
    â”œâ”€â”€ submittedByName: "SP John Doe"
    â”œâ”€â”€ submittedByRank: "Superintendent of Police"
    â”‚
    â”œâ”€â”€ â”€â”€â”€ ASSIGNMENT FIELDS â”€â”€â”€
    â”œâ”€â”€ assignedTo: "officer-uid-456"
    â”œâ”€â”€ assignedToName: "SI Jane Smith"
    â”œâ”€â”€ assignedToRank: "Sub Inspector of Police"
    â”œâ”€â”€ assignedToStation: "City Central PS"
    â”œâ”€â”€ assignedBy: "officer-uid-123"
    â”œâ”€â”€ assignedByName: "SP John Doe"
    â”œâ”€â”€ assignedAt: Timestamp(2026-01-20...)
    â”œâ”€â”€ assignmentStatus: "pending"
    â”œâ”€â”€ assignmentNotes: "Urgent case"
    â”‚
    â””â”€â”€ â”€â”€â”€ STANDARD FIELDS â”€â”€â”€
        â”œâ”€â”€ userId: "officer-uid-123"
        â”œâ”€â”€ createdAt: Timestamp
        â”œâ”€â”€ updatedAt: Timestamp
        â”œâ”€â”€ district: "District Name"
        â”œâ”€â”€ stationName: "Station Name"
        â”œâ”€â”€ handwrittenDocumentUrl: "gs://..."
        â””â”€â”€ proofDocumentUrls: ["gs://...", "gs://..."]

police_users (collection)
â”œâ”€â”€ {officerUid} (document)
    â”œâ”€â”€ displayName: string
    â”œâ”€â”€ rank: string
    â”œâ”€â”€ district: string
    â”œâ”€â”€ stationName: string
    â”œâ”€â”€ range: string
    â””â”€â”€ ...
```

---

## ğŸ¯ User Journey Map

### SP Officer Journey (Submitter)

```
1. Login
   â”‚
   â†“
2. See Dashboard
   â”‚
   â†“
3. Notice "Submit Offline Petition" card
   â”‚
   â†“
4. Click â†’ Navigate to submission form
   â”‚
   â†“
5. Fill petition details
   â”‚
   â†“
6. Upload documents from citizen
   â”‚
   â†“
7. Decide to assign immediately
   â”‚
   â†“
8. Toggle assignment switch
   â”‚
   â†“
9. Click "Select Officer"
   â”‚
   â†“
10. Search/Filter officers
    â”‚
    â†“
11. Select appropriate officer
    â”‚
    â†“
12. Review all details
    â”‚
    â†“
13. Submit petition
    â”‚
    â†“
14. See success message
    â”‚
    â†“
15. Return to dashboard
```

### SI Officer Journey (Assignee)

```
1. Login
   â”‚
   â†“
2. See Dashboard
   â”‚
   â†“
3. Navigate to Petitions
   â”‚
   â†“
4. See "Assigned to Me" tab
   â”‚
   â†“
5. Filter by "Pending"
   â”‚
   â†“
6. See new petition assigned
   â”‚
   â†“
7. Click to open details
   â”‚
   â†“
8. Review petition thoroughly
   â”‚
   â†“
9. Check documents attached
   â”‚
   â†“
10. Decide to accept
    â”‚
    â†“
11. Click "Accept" button
    â”‚
    â†“
12. Status updates to "Accepted"
    â”‚
    â†“
13. Begin working on case
    â”‚
    â†“
14. Add updates via timeline
    â”‚
    â†“
15. Update police status as progresses
```

---

## ğŸ”” Future: Notification Flow (Planned)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SP Assigns       â”‚
â”‚ Petition to SI   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Firestore        â”‚
â”‚ Trigger/Cloud    â”‚
â”‚ Function         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FCM Notification â”‚
â”‚ Service          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â†’ ğŸ“± Push Notification
         â”‚       "New petition assigned to you"
         â”‚
         â””â”€â”€â”€â”€â”€â†’ ğŸ“§ Email Notification
                 "Petition XYZ assigned"
                 
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SI Receives      â”‚
â”‚ Notification     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“ (Clicks notification)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Opens App        â”‚
â”‚ â†’ Assigned Tab   â”‚
â”‚ â†’ Sees Petition  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Last Updated**: January 2026  
**Version**: 1.0  
**Purpose**: Visual reference for offline petition feature architecture
